2024-10-14 15:29:13.323 +07:00 [INF] Loaded with configuration from: appsettings.json, C:\homeautio\HomeAutio.Mqtt.GoogleHome-3.0.0.15\src\HomeAutio.Mqtt.GoogleHome\appsettings.Development.json
2024-10-14 15:29:14.378 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2024-10-14 15:29:14.441 +07:00 [INF] Restored tokens from config/tokens.json
2024-10-14 15:29:14.464 +07:00 [INF] Using the default authentication scheme Cookies for IdentityServer
2024-10-14 15:29:14.905 +07:00 [INF] Loaded device configuration from config/googleDevices.json
2024-10-14 15:29:14.987 +07:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-10-14 15:29:14.992 +07:00 [INF] Service start initiated
2024-10-14 15:29:14.995 +07:00 [INF] MQTT subscribing to the following topics: google/home/commands/+/set, google/home/state/outlet/AGF65T/onoff, google/home/state/switch/1434TYRE/onoff
2024-10-14 15:29:14.999 +07:00 [INF] Started
2024-10-14 15:29:14.999 +07:00 [INF] Service started successfully
2024-10-14 15:29:15.125 +07:00 [INF] Now listening on: https://localhost:51293
2024-10-14 15:29:15.126 +07:00 [INF] Now listening on: http://localhost:51294
2024-10-14 15:29:15.141 +07:00 [INF] Connected.
2024-10-14 15:29:15.146 +07:00 [INF] MQTT Connection established
2024-10-14 15:29:15.149 +07:00 [INF] Publishing subscriptions at reconnect
2024-10-14 15:29:15.162 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-10-14 15:29:15.163 +07:00 [INF] Hosting environment: Development
2024-10-14 15:29:15.164 +07:00 [INF] Content root path: C:\homeautio\HomeAutio.Mqtt.GoogleHome-3.0.0.15\src\HomeAutio.Mqtt.GoogleHome
2024-10-14 15:29:15.398 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/ - -
2024-10-14 15:29:15.497 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-10-14 15:29:15.503 +07:00 [INF] AuthenticationScheme: Cookies was challenged.
2024-10-14 15:29:15.506 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/ - - - 302 0 - 108.7314ms
2024-10-14 15:29:15.512 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/Account/Login?ReturnUrl=%2F - -
2024-10-14 15:29:15.520 +07:00 [INF] Executing endpoint 'IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI)'
2024-10-14 15:29:15.535 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServerHost.Quickstart.UI.AccountController (IdentityServerHost.Quickstart.UI).
2024-10-14 15:29:15.567 +07:00 [INF] Executing ViewResult, running view Login.
2024-10-14 15:29:15.643 +07:00 [INF] Executed ViewResult - view Login executed in 77.011ms.
2024-10-14 15:29:15.648 +07:00 [INF] Executed action IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI) in 111.5485ms
2024-10-14 15:29:15.650 +07:00 [INF] Executed endpoint 'IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI)'
2024-10-14 15:29:15.654 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/Account/Login?ReturnUrl=%2F - - - 200 - text/html;+charset=utf-8 141.7907ms
2024-10-14 15:29:15.658 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - -
2024-10-14 15:29:15.659 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_vs/browserLink - -
2024-10-14 15:29:15.662 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - - - 200 12382 application/javascript;+charset=utf-8 3.4993ms
2024-10-14 15:29:15.696 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 36.8495ms
2024-10-14 15:29:16.840 +07:00 [INF] Request starting HTTP/2 POST https://localhost:51293/Account/Login?ReturnUrl=%2F application/x-www-form-urlencoded 273
2024-10-14 15:29:16.844 +07:00 [INF] Executing endpoint 'IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI)'
2024-10-14 15:29:16.851 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServerHost.Quickstart.UI.LoginInputModel, System.String) on controller IdentityServerHost.Quickstart.UI.AccountController (IdentityServerHost.Quickstart.UI).
2024-10-14 15:29:16.876 +07:00 [INF] AuthenticationScheme: Cookies signed in.
2024-10-14 15:29:16.877 +07:00 [INF] Executing RedirectResult, redirecting to /.
2024-10-14 15:29:16.878 +07:00 [INF] Executed action IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI) in 25.5194ms
2024-10-14 15:29:16.879 +07:00 [INF] Executed endpoint 'IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI)'
2024-10-14 15:29:16.880 +07:00 [INF] Request finished HTTP/2 POST https://localhost:51293/Account/Login?ReturnUrl=%2F application/x-www-form-urlencoded 273 - 302 0 - 40.1142ms
2024-10-14 15:29:16.883 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/ - -
2024-10-14 15:29:16.886 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Index (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:16.887 +07:00 [INF] Route matched with {action = "Index", controller = "GoogleDevice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController (HomeAutio.Mqtt.GoogleHome).
2024-10-14 15:29:16.890 +07:00 [INF] Executing ViewResult, running view Index.
2024-10-14 15:29:16.904 +07:00 [INF] Executed ViewResult - view Index executed in 15.2901ms.
2024-10-14 15:29:16.905 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Index (HomeAutio.Mqtt.GoogleHome) in 17.1184ms
2024-10-14 15:29:16.906 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Index (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:16.907 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/ - - - 200 - text/html;+charset=utf-8 23.7321ms
2024-10-14 15:29:16.910 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - -
2024-10-14 15:29:16.910 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_vs/browserLink - -
2024-10-14 15:29:16.911 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - - - 200 12382 application/javascript;+charset=utf-8 0.9660ms
2024-10-14 15:29:16.917 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 7.1863ms
2024-10-14 15:29:24.245 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/GoogleDevice/Create - -
2024-10-14 15:29:24.247 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Create (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:24.249 +07:00 [INF] Route matched with {action = "Create", controller = "GoogleDevice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create() on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController (HomeAutio.Mqtt.GoogleHome).
2024-10-14 15:29:24.252 +07:00 [INF] Executing ViewResult, running view Create.
2024-10-14 15:29:24.285 +07:00 [INF] Executed ViewResult - view Create executed in 33.5538ms.
2024-10-14 15:29:24.286 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Create (HomeAutio.Mqtt.GoogleHome) in 36.148ms
2024-10-14 15:29:24.288 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Create (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:24.289 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/GoogleDevice/Create - - - 200 - text/html;+charset=utf-8 44.5334ms
2024-10-14 15:29:24.293 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - -
2024-10-14 15:29:24.293 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_vs/browserLink - -
2024-10-14 15:29:24.293 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - - - 200 12382 application/javascript;+charset=utf-8 0.8478ms
2024-10-14 15:29:24.296 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 3.6157ms
2024-10-14 15:29:41.153 +07:00 [INF] Request starting HTTP/2 POST https://localhost:51293/GoogleDevice/Create application/x-www-form-urlencoded 383
2024-10-14 15:29:41.157 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Create (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:41.160 +07:00 [INF] Route matched with {action = "Create", controller = "GoogleDevice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create(HomeAutio.Mqtt.GoogleHome.ViewModels.DeviceViewModel) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController (HomeAutio.Mqtt.GoogleHome).
2024-10-14 15:29:41.174 +07:00 [INF] Persisting device configuration changes to config/googleDevices.json
2024-10-14 15:29:41.501 +07:00 [INF] Start processing HTTP request POST https://oauth2.googleapis.com/token
2024-10-14 15:29:41.503 +07:00 [INF] Sending HTTP request POST https://oauth2.googleapis.com/token
2024-10-14 15:29:41.952 +07:00 [INF] Received HTTP response headers after 446.3217ms - 200
2024-10-14 15:29:41.954 +07:00 [INF] End processing HTTP request after 454.3759ms - 200
2024-10-14 15:29:42.574 +07:00 [INF] Start processing HTTP request POST https://homegraph.googleapis.com/v1/devices:requestSync
2024-10-14 15:29:42.575 +07:00 [INF] Sending HTTP request POST https://homegraph.googleapis.com/v1/devices:requestSync
2024-10-14 15:29:42.579 +07:00 [INF] Executing RedirectResult, redirecting to /.
2024-10-14 15:29:42.579 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Create (HomeAutio.Mqtt.GoogleHome) in 1417.8242ms
2024-10-14 15:29:42.580 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Create (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:42.581 +07:00 [INF] Request finished HTTP/2 POST https://localhost:51293/GoogleDevice/Create application/x-www-form-urlencoded 383 - 302 0 - 1427.2186ms
2024-10-14 15:29:42.583 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/ - -
2024-10-14 15:29:42.584 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Index (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:42.585 +07:00 [INF] Route matched with {action = "Index", controller = "GoogleDevice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController (HomeAutio.Mqtt.GoogleHome).
2024-10-14 15:29:42.586 +07:00 [INF] Executing ViewResult, running view Index.
2024-10-14 15:29:42.587 +07:00 [INF] Executed ViewResult - view Index executed in 1.537ms.
2024-10-14 15:29:42.588 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Index (HomeAutio.Mqtt.GoogleHome) in 2.227ms
2024-10-14 15:29:42.589 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Index (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:42.590 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/ - - - 200 - text/html;+charset=utf-8 6.4745ms
2024-10-14 15:29:42.593 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_vs/browserLink - -
2024-10-14 15:29:42.593 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - -
2024-10-14 15:29:42.594 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - - - 200 12382 application/javascript;+charset=utf-8 1.0733ms
2024-10-14 15:29:42.596 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 2.5591ms
2024-10-14 15:29:43.587 +07:00 [INF] Received HTTP response headers after 1011.1294ms - 200
2024-10-14 15:29:43.589 +07:00 [INF] End processing HTTP request after 1014.7244ms - 200
2024-10-14 15:29:43.590 +07:00 [INF] Google Home Graph REQUEST_SYNC sent
2024-10-14 15:29:50.118 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/GoogleDevice/Edit?deviceId=google%2Fhome%2Flock%2FDEF5566 - -
2024-10-14 15:29:50.120 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Edit (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:50.121 +07:00 [INF] Route matched with {action = "Edit", controller = "GoogleDevice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Edit(System.String) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController (HomeAutio.Mqtt.GoogleHome).
2024-10-14 15:29:50.126 +07:00 [INF] Executing ViewResult, running view Edit.
2024-10-14 15:29:50.150 +07:00 [INF] Executed ViewResult - view Edit executed in 24.2382ms.
2024-10-14 15:29:50.152 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Edit (HomeAutio.Mqtt.GoogleHome) in 29.7392ms
2024-10-14 15:29:50.153 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Edit (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:50.154 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/GoogleDevice/Edit?deviceId=google%2Fhome%2Flock%2FDEF5566 - - - 200 - text/html;+charset=utf-8 36.1718ms
2024-10-14 15:29:50.156 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - -
2024-10-14 15:29:50.156 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_vs/browserLink - -
2024-10-14 15:29:50.157 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - - - 200 12382 application/javascript;+charset=utf-8 0.5259ms
2024-10-14 15:29:50.159 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 2.4245ms
2024-10-14 15:29:55.127 +07:00 [INF] Request starting HTTP/2 POST https://localhost:51293/GoogleDevice/Delete?deviceId=google%2Fhome%2Flock%2FDEF5566 application/x-www-form-urlencoded 239
2024-10-14 15:29:55.129 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Delete (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:55.130 +07:00 [INF] Route matched with {action = "Delete", controller = "GoogleDevice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.String) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController (HomeAutio.Mqtt.GoogleHome).
2024-10-14 15:29:55.132 +07:00 [INF] Persisting device configuration changes to config/googleDevices.json
2024-10-14 15:29:55.134 +07:00 [INF] Start processing HTTP request POST https://homegraph.googleapis.com/v1/devices:requestSync
2024-10-14 15:29:55.134 +07:00 [INF] Sending HTTP request POST https://homegraph.googleapis.com/v1/devices:requestSync
2024-10-14 15:29:55.138 +07:00 [INF] Executing RedirectResult, redirecting to /.
2024-10-14 15:29:55.139 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Delete (HomeAutio.Mqtt.GoogleHome) in 7.923ms
2024-10-14 15:29:55.140 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Delete (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:55.141 +07:00 [INF] Request finished HTTP/2 POST https://localhost:51293/GoogleDevice/Delete?deviceId=google%2Fhome%2Flock%2FDEF5566 application/x-www-form-urlencoded 239 - 302 0 - 14.7094ms
2024-10-14 15:29:55.144 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/ - -
2024-10-14 15:29:55.145 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Index (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:55.146 +07:00 [INF] Route matched with {action = "Index", controller = "GoogleDevice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController (HomeAutio.Mqtt.GoogleHome).
2024-10-14 15:29:55.147 +07:00 [INF] Executing ViewResult, running view Index.
2024-10-14 15:29:55.148 +07:00 [INF] Executed ViewResult - view Index executed in 1.3298ms.
2024-10-14 15:29:55.149 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Index (HomeAutio.Mqtt.GoogleHome) in 2.0287ms
2024-10-14 15:29:55.150 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Index (HomeAutio.Mqtt.GoogleHome)'
2024-10-14 15:29:55.150 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/ - - - 200 - text/html;+charset=utf-8 6.1243ms
2024-10-14 15:29:55.155 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - -
2024-10-14 15:29:55.155 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_vs/browserLink - -
2024-10-14 15:29:55.155 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - - - 200 12382 application/javascript;+charset=utf-8 0.5202ms
2024-10-14 15:29:55.157 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 2.5968ms
2024-10-14 15:29:55.458 +07:00 [INF] Received HTTP response headers after 323.3867ms - 200
2024-10-14 15:29:55.459 +07:00 [INF] End processing HTTP request after 325.7786ms - 200
2024-10-14 15:29:55.460 +07:00 [INF] Google Home Graph REQUEST_SYNC sent
