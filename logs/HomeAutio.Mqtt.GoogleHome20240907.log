2024-09-07 18:08:59.076 +07:00 [INF] Loaded with configuration from: appsettings.json, C:\homeautio\HomeAutio.Mqtt.GoogleHome-3.0.0.15\src\HomeAutio.Mqtt.GoogleHome\appsettings.Development.json
2024-09-07 18:08:59.720 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2024-09-07 18:08:59.792 +07:00 [INF] Restored tokens from config/tokens.json
2024-09-07 18:08:59.811 +07:00 [INF] Using the default authentication scheme Cookies for IdentityServer
2024-09-07 18:09:00.292 +07:00 [INF] Loaded device configuration from config/googleDevices.json
2024-09-07 18:09:00.370 +07:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-07 18:09:00.374 +07:00 [INF] Service start initiated
2024-09-07 18:09:00.377 +07:00 [INF] MQTT subscribing to the following topics: google/home/commands/+/set, google/home/switch, google/home/lock/set, google/home/modeDevice, google/home/vacuum/docked, google/home/vacuum/paused, google/home/light/123/temp, google/home/dimmableLight, google/home/light/123/pw, google/home/light/123/brightness
2024-09-07 18:09:00.380 +07:00 [INF] Started
2024-09-07 18:09:00.380 +07:00 [INF] Service started successfully
2024-09-07 18:09:00.449 +07:00 [INF] Now listening on: https://localhost:51293
2024-09-07 18:09:00.450 +07:00 [INF] Now listening on: http://localhost:51294
2024-09-07 18:09:00.482 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-07 18:09:00.483 +07:00 [INF] Hosting environment: Development
2024-09-07 18:09:00.483 +07:00 [INF] Content root path: C:\homeautio\HomeAutio.Mqtt.GoogleHome-3.0.0.15\src\HomeAutio.Mqtt.GoogleHome
2024-09-07 18:09:00.526 +07:00 [INF] Connected.
2024-09-07 18:09:00.532 +07:00 [INF] MQTT Connection established
2024-09-07 18:09:00.534 +07:00 [INF] Publishing subscriptions at reconnect
2024-09-07 18:09:00.984 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/ - -
2024-09-07 18:09:01.047 +07:00 [INF] Cookies was not authenticated. Failure message: Ticket expired
2024-09-07 18:09:01.051 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-09-07 18:09:01.055 +07:00 [INF] AuthenticationScheme: Cookies was challenged.
2024-09-07 18:09:01.058 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/ - - - 302 0 - 74.2476ms
2024-09-07 18:09:01.064 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/Account/Login?ReturnUrl=%2F - -
2024-09-07 18:09:01.070 +07:00 [INF] Cookies was not authenticated. Failure message: Ticket expired
2024-09-07 18:09:01.072 +07:00 [INF] Executing endpoint 'IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI)'
2024-09-07 18:09:01.086 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServerHost.Quickstart.UI.AccountController (IdentityServerHost.Quickstart.UI).
2024-09-07 18:09:01.112 +07:00 [INF] Executing ViewResult, running view Login.
2024-09-07 18:09:01.188 +07:00 [INF] Executed ViewResult - view Login executed in 77.3259ms.
2024-09-07 18:09:01.194 +07:00 [INF] Executed action IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI) in 106.6615ms
2024-09-07 18:09:01.196 +07:00 [INF] Executed endpoint 'IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI)'
2024-09-07 18:09:01.201 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/Account/Login?ReturnUrl=%2F - - - 200 - text/html;+charset=utf-8 136.8839ms
2024-09-07 18:09:01.203 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_vs/browserLink - -
2024-09-07 18:09:01.203 +07:00 [INF] Request starting HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - -
2024-09-07 18:09:01.207 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_framework/aspnetcore-browser-refresh.js - - - 200 12382 application/javascript;+charset=utf-8 4.0870ms
2024-09-07 18:09:01.222 +07:00 [INF] Request finished HTTP/2 GET https://localhost:51293/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 19.3306ms
2024-09-07 18:09:08.776 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/GoogleDevice/Edit?deviceId=google%2Fhome%2Flight%2F123 - -
2024-09-07 18:09:08.780 +07:00 [INF] Cookies was not authenticated. Failure message: Ticket expired
2024-09-07 18:09:08.782 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-09-07 18:09:08.783 +07:00 [INF] AuthenticationScheme: Cookies was challenged.
2024-09-07 18:09:08.784 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/GoogleDevice/Edit?deviceId=google%2Fhome%2Flight%2F123 - - - 302 0 - 7.3302ms
2024-09-07 18:09:08.887 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/Account/Login?ReturnUrl=%2FGoogleDevice%2FEdit%3FdeviceId%3Dgoogle%252Fhome%252Flight%252F123 - -
2024-09-07 18:09:08.890 +07:00 [INF] Cookies was not authenticated. Failure message: Ticket expired
2024-09-07 18:09:08.891 +07:00 [INF] Executing endpoint 'IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI)'
2024-09-07 18:09:08.892 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServerHost.Quickstart.UI.AccountController (IdentityServerHost.Quickstart.UI).
2024-09-07 18:09:08.896 +07:00 [INF] Executing ViewResult, running view Login.
2024-09-07 18:09:08.900 +07:00 [INF] Executed ViewResult - view Login executed in 4.1954ms.
2024-09-07 18:09:08.901 +07:00 [INF] Executed action IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI) in 7.7388ms
2024-09-07 18:09:08.902 +07:00 [INF] Executed endpoint 'IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI)'
2024-09-07 18:09:08.902 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/Account/Login?ReturnUrl=%2FGoogleDevice%2FEdit%3FdeviceId%3Dgoogle%252Fhome%252Flight%252F123 - - - 200 - text/html;+charset=utf-8 15.1430ms
2024-09-07 18:09:09.017 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - -
2024-09-07 18:09:09.018 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - - - 200 12382 application/javascript;+charset=utf-8 1.1914ms
2024-09-07 18:09:09.067 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_vs/browserLink - -
2024-09-07 18:09:09.074 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 7.0258ms
2024-09-07 18:09:17.138 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/Account/Login?ReturnUrl=%2FGoogleDevice%2FEdit%3FdeviceId%3Dgoogle%252Fhome%252Flight%252F123 application/x-www-form-urlencoded 339
2024-09-07 18:09:17.140 +07:00 [INF] Cookies was not authenticated. Failure message: Ticket expired
2024-09-07 18:09:17.140 +07:00 [INF] Executing endpoint 'IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI)'
2024-09-07 18:09:17.145 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServerHost.Quickstart.UI.LoginInputModel, System.String) on controller IdentityServerHost.Quickstart.UI.AccountController (IdentityServerHost.Quickstart.UI).
2024-09-07 18:09:17.165 +07:00 [INF] Cookies was not authenticated. Failure message: Ticket expired
2024-09-07 18:09:17.169 +07:00 [INF] AuthenticationScheme: Cookies signed in.
2024-09-07 18:09:17.170 +07:00 [INF] Executing RedirectResult, redirecting to /GoogleDevice/Edit?deviceId=google%2Fhome%2Flight%2F123.
2024-09-07 18:09:17.171 +07:00 [INF] Executed action IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI) in 25.1094ms
2024-09-07 18:09:17.172 +07:00 [INF] Executed endpoint 'IdentityServerHost.Quickstart.UI.AccountController.Login (IdentityServerHost.Quickstart.UI)'
2024-09-07 18:09:17.172 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/Account/Login?ReturnUrl=%2FGoogleDevice%2FEdit%3FdeviceId%3Dgoogle%252Fhome%252Flight%252F123 application/x-www-form-urlencoded 339 - 302 0 - 34.2970ms
2024-09-07 18:09:17.289 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/GoogleDevice/Edit?deviceId=google%2Fhome%2Flight%2F123 - -
2024-09-07 18:09:17.293 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Edit (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:09:17.295 +07:00 [INF] Route matched with {action = "Edit", controller = "GoogleDevice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Edit(System.String) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:09:17.300 +07:00 [INF] Executing ViewResult, running view Edit.
2024-09-07 18:09:17.343 +07:00 [INF] Executed ViewResult - view Edit executed in 43.0729ms.
2024-09-07 18:09:17.344 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Edit (HomeAutio.Mqtt.GoogleHome) in 47.8129ms
2024-09-07 18:09:17.345 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Edit (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:09:17.346 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/GoogleDevice/Edit?deviceId=google%2Fhome%2Flight%2F123 - - - 200 - text/html;+charset=utf-8 56.9102ms
2024-09-07 18:09:17.498 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - -
2024-09-07 18:09:17.499 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_vs/browserLink - -
2024-09-07 18:09:17.499 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - - - 200 12382 application/javascript;+charset=utf-8 1.0553ms
2024-09-07 18:09:17.501 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 1.8632ms
2024-09-07 18:10:00.383 +07:00 [INF] Removing expired grants
2024-09-07 18:11:00.386 +07:00 [INF] Removing expired grants
2024-09-07 18:12:00.388 +07:00 [INF] Removing expired grants
2024-09-07 18:13:00.389 +07:00 [INF] Removing expired grants
2024-09-07 18:14:00.391 +07:00 [INF] Removing expired grants
2024-09-07 18:15:00.392 +07:00 [INF] Removing expired grants
2024-09-07 18:16:00.393 +07:00 [INF] Removing expired grants
2024-09-07 18:17:00.394 +07:00 [INF] Removing expired grants
2024-09-07 18:18:00.396 +07:00 [INF] Removing expired grants
2024-09-07 18:19:00.398 +07:00 [INF] Removing expired grants
2024-09-07 18:20:00.400 +07:00 [INF] Removing expired grants
2024-09-07 18:21:00.402 +07:00 [INF] Removing expired grants
2024-09-07 18:22:00.403 +07:00 [INF] Removing expired grants
2024-09-07 18:23:00.404 +07:00 [INF] Removing expired grants
2024-09-07 18:24:00.405 +07:00 [INF] Removing expired grants
2024-09-07 18:25:00.407 +07:00 [INF] Removing expired grants
2024-09-07 18:26:00.408 +07:00 [INF] Removing expired grants
2024-09-07 18:27:00.409 +07:00 [INF] Removing expired grants
2024-09-07 18:28:00.410 +07:00 [INF] Removing expired grants
2024-09-07 18:29:00.412 +07:00 [INF] Removing expired grants
2024-09-07 18:30:00.413 +07:00 [INF] Removing expired grants
2024-09-07 18:31:00.414 +07:00 [INF] Removing expired grants
2024-09-07 18:32:00.415 +07:00 [INF] Removing expired grants
2024-09-07 18:33:00.417 +07:00 [INF] Removing expired grants
2024-09-07 18:34:00.418 +07:00 [INF] Removing expired grants
2024-09-07 18:35:00.419 +07:00 [INF] Removing expired grants
2024-09-07 18:36:00.421 +07:00 [INF] Removing expired grants
2024-09-07 18:36:29.435 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/connect/token application/x-www-form-urlencoded 201
2024-09-07 18:36:29.444 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2024-09-07 18:36:29.481 +07:00 [INF] Token request validation success, {"ClientId":"00000000-0000-0000-0000-000000000000","ClientName":"Google Actions Client","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"****B00A","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","refresh_token":"***REDACTED***","client_id":"00000000-0000-0000-0000-000000000000","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2024-09-07 18:36:29.530 +07:00 [INF] Writing tokens to config/tokens.json
2024-09-07 18:36:29.535 +07:00 [INF] Wrote tokens to config/tokens.json
2024-09-07 18:36:29.539 +07:00 [INF] Writing tokens to config/tokens.json
2024-09-07 18:36:29.549 +07:00 [INF] Wrote tokens to config/tokens.json
2024-09-07 18:36:29.562 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/connect/token application/x-www-form-urlencoded 201 - 200 - application/json;+charset=UTF-8 126.4824ms
2024-09-07 18:36:30.181 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 313
2024-09-07 18:36:30.197 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration - -
2024-09-07 18:36:30.199 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2024-09-07 18:36:30.212 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 15.1148ms
2024-09-07 18:36:30.228 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration/jwks - -
2024-09-07 18:36:30.231 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2024-09-07 18:36:30.237 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 9.5390ms
2024-09-07 18:36:30.257 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:30.259 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:36:30.276 +07:00 [INF] Received QUERY intent for devices: google/home/modeDevice, google/home/lock, google/home/switch, google/home/light/123, google/home/camera, google/home/dimmableLight, google/home/vacuum
2024-09-07 18:36:30.291 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:36:30.300 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 37.2593ms
2024-09-07 18:36:30.300 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:30.303 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 313 - 200 642 application/json;+charset=utf-8 122.5173ms
2024-09-07 18:36:30.377 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 192
2024-09-07 18:36:30.380 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:30.381 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:36:30.385 +07:00 [INF] Received QUERY intent for devices: google/home/modeDevice, google/home/vacuum, google/home/switch
2024-09-07 18:36:30.386 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:36:30.387 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 2.9691ms
2024-09-07 18:36:30.388 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:30.391 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 192 - 200 319 application/json;+charset=utf-8 13.0606ms
2024-09-07 18:36:30.419 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 224
2024-09-07 18:36:30.422 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:30.423 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:36:30.425 +07:00 [INF] Received QUERY intent for devices: google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/lock
2024-09-07 18:36:30.427 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:36:30.427 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 2.9392ms
2024-09-07 18:36:30.428 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:30.432 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 224 - 200 381 application/json;+charset=utf-8 12.8435ms
2024-09-07 18:36:33.663 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 284
2024-09-07 18:36:33.665 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:33.666 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:36:33.676 +07:00 [INF] Received EXECUTE intent for commands: action.devices.commands.OnOff
2024-09-07 18:36:33.685 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:36:33.688 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 21.0264ms
2024-09-07 18:36:33.690 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:33.691 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 284 - 200 144 application/json;+charset=utf-8 27.4759ms
2024-09-07 18:36:33.697 +07:00 [INF] MQTT message received for topic google/home/lock/set: True
2024-09-07 18:36:33.700 +07:00 [WRN] WillReportState triggered but Google Home Graph serviceAccountFile setting was blank, or the file didn't exist
2024-09-07 18:36:38.498 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 140
2024-09-07 18:36:38.500 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.501 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:36:38.503 +07:00 [INF] Received QUERY intent for devices: google/home/dimmableLight
2024-09-07 18:36:38.504 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:36:38.504 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.6019ms
2024-09-07 18:36:38.506 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.507 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 140 - 200 149 application/json;+charset=utf-8 8.7608ms
2024-09-07 18:36:38.743 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 136
2024-09-07 18:36:38.746 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.747 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:36:38.749 +07:00 [INF] Received QUERY intent for devices: google/home/modeDevice
2024-09-07 18:36:38.749 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:36:38.750 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.6623ms
2024-09-07 18:36:38.751 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.752 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 136 - 200 161 application/json;+charset=utf-8 8.6861ms
2024-09-07 18:36:38.783 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 136
2024-09-07 18:36:38.783 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 133
2024-09-07 18:36:38.785 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.786 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.787 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:36:38.788 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:36:38.789 +07:00 [INF] Received QUERY intent for devices: google/home/light/123
2024-09-07 18:36:38.791 +07:00 [INF] Received QUERY intent for devices: google/home/vacuum
2024-09-07 18:36:38.791 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:36:38.791 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:36:38.792 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 3.0558ms
2024-09-07 18:36:38.795 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 4.3344ms
2024-09-07 18:36:38.797 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.799 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.800 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 136 - 200 172 application/json;+charset=utf-8 16.9512ms
2024-09-07 18:36:38.801 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 133 - 200 151 application/json;+charset=utf-8 17.9096ms
2024-09-07 18:36:38.824 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 133
2024-09-07 18:36:38.824 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 131
2024-09-07 18:36:38.825 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.826 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.827 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:36:38.828 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:36:38.830 +07:00 [INF] Received QUERY intent for devices: google/home/camera
2024-09-07 18:36:38.832 +07:00 [INF] Received QUERY intent for devices: google/home/lock
2024-09-07 18:36:38.832 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:36:38.832 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:36:38.834 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 4.2519ms
2024-09-07 18:36:38.835 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 3.7669ms
2024-09-07 18:36:38.836 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.837 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.838 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 133 - 200 116 application/json;+charset=utf-8 14.2299ms
2024-09-07 18:36:38.839 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 131 - 200 124 application/json;+charset=utf-8 14.9160ms
2024-09-07 18:36:38.865 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 133
2024-09-07 18:36:38.866 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.867 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:36:38.868 +07:00 [INF] Received QUERY intent for devices: google/home/switch
2024-09-07 18:36:38.869 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:36:38.869 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.3406ms
2024-09-07 18:36:38.870 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:36:38.871 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 133 - 200 127 application/json;+charset=utf-8 6.2009ms
2024-09-07 18:37:00.422 +07:00 [INF] Removing expired grants
2024-09-07 18:37:00.424 +07:00 [INF] Writing tokens to config/tokens.json
2024-09-07 18:37:00.425 +07:00 [INF] Wrote tokens to config/tokens.json
2024-09-07 18:37:59.252 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 312
2024-09-07 18:37:59.254 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:37:59.255 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:37:59.256 +07:00 [INF] Received QUERY intent for devices: google/home/lock, google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/switch, google/home/vacuum, google/home/modeDevice
2024-09-07 18:37:59.257 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:37:59.258 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 2.3896ms
2024-09-07 18:37:59.259 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:37:59.260 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 312 - 200 640 application/json;+charset=utf-8 8.1355ms
2024-09-07 18:37:59.862 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 225
2024-09-07 18:37:59.863 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:37:59.864 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:37:59.866 +07:00 [INF] Received QUERY intent for devices: google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/lock
2024-09-07 18:37:59.866 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:37:59.867 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.7736ms
2024-09-07 18:37:59.868 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:37:59.869 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 225 - 200 381 application/json;+charset=utf-8 7.3653ms
2024-09-07 18:37:59.920 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 192
2024-09-07 18:37:59.921 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:37:59.923 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:37:59.925 +07:00 [INF] Received QUERY intent for devices: google/home/vacuum, google/home/modeDevice, google/home/switch
2024-09-07 18:37:59.925 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:37:59.926 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.4928ms
2024-09-07 18:37:59.927 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:37:59.927 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 192 - 200 319 application/json;+charset=utf-8 7.8739ms
2024-09-07 18:38:00.425 +07:00 [INF] Removing expired grants
2024-09-07 18:39:00.426 +07:00 [INF] Removing expired grants
2024-09-07 18:41:51.572 +07:00 [INF] Loaded with configuration from: appsettings.json, C:\homeautio\HomeAutio.Mqtt.GoogleHome-3.0.0.15\src\HomeAutio.Mqtt.GoogleHome\appsettings.Development.json
2024-09-07 18:41:51.848 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2024-09-07 18:41:51.900 +07:00 [INF] Restored tokens from config/tokens.json
2024-09-07 18:41:51.923 +07:00 [INF] Using the default authentication scheme Cookies for IdentityServer
2024-09-07 18:41:52.163 +07:00 [INF] Loaded device configuration from config/googleDevices.json
2024-09-07 18:41:52.179 +07:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-07 18:41:52.183 +07:00 [INF] Service start initiated
2024-09-07 18:41:52.186 +07:00 [INF] MQTT subscribing to the following topics: google/home/commands/+/set, google/home/light/123/pw, google/home/vacuum/paused, google/home/light/123/temp, google/home/light/123/brightness, google/home/vacuum/docked, google/home/lock/set, google/home/modeDevice, google/home/dimmableLight, google/home/switch
2024-09-07 18:41:52.188 +07:00 [INF] Started
2024-09-07 18:41:52.189 +07:00 [INF] Service started successfully
2024-09-07 18:41:52.241 +07:00 [INF] Now listening on: https://localhost:51293
2024-09-07 18:41:52.243 +07:00 [INF] Now listening on: http://localhost:51294
2024-09-07 18:41:52.270 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-07 18:41:52.271 +07:00 [INF] Hosting environment: Development
2024-09-07 18:41:52.272 +07:00 [INF] Content root path: C:\homeautio\HomeAutio.Mqtt.GoogleHome-3.0.0.15\src\HomeAutio.Mqtt.GoogleHome
2024-09-07 18:41:52.316 +07:00 [INF] Connected.
2024-09-07 18:41:52.321 +07:00 [INF] MQTT Connection established
2024-09-07 18:41:52.323 +07:00 [INF] Publishing subscriptions at reconnect
2024-09-07 18:41:52.805 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/GoogleDevice/Edit?deviceId=google%2Fhome%2Flight%2F123 - -
2024-09-07 18:41:52.876 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Edit (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:41:52.887 +07:00 [INF] Route matched with {action = "Edit", controller = "GoogleDevice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Edit(System.String) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:41:52.917 +07:00 [INF] Executing ViewResult, running view Edit.
2024-09-07 18:41:53.024 +07:00 [INF] Executed ViewResult - view Edit executed in 112.8606ms.
2024-09-07 18:41:53.027 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Edit (HomeAutio.Mqtt.GoogleHome) in 138.6192ms
2024-09-07 18:41:53.029 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Edit (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:41:53.032 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/GoogleDevice/Edit?deviceId=google%2Fhome%2Flight%2F123 - - - 200 - text/html;+charset=utf-8 228.7260ms
2024-09-07 18:41:53.189 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - -
2024-09-07 18:41:53.191 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - - - 200 12382 application/javascript;+charset=utf-8 1.9868ms
2024-09-07 18:41:53.237 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_vs/browserLink - -
2024-09-07 18:41:53.254 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.7459ms
2024-09-07 18:41:57.550 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 313
2024-09-07 18:41:57.572 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration - -
2024-09-07 18:41:57.581 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2024-09-07 18:41:57.598 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 25.2870ms
2024-09-07 18:41:57.616 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration/jwks - -
2024-09-07 18:41:57.619 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2024-09-07 18:41:57.625 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 9.5294ms
2024-09-07 18:41:57.664 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:41:57.668 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:41:57.684 +07:00 [INF] Received QUERY intent for devices: google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/switch, google/home/vacuum, google/home/modeDevice, google/home/lock
2024-09-07 18:41:57.699 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:41:57.709 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 39.8366ms
2024-09-07 18:41:57.710 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:41:57.714 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 313 - 200 642 application/json;+charset=utf-8 163.7018ms
2024-09-07 18:42:52.192 +07:00 [INF] Removing expired grants
2024-09-07 18:43:52.194 +07:00 [INF] Removing expired grants
2024-09-07 18:44:52.195 +07:00 [INF] Removing expired grants
2024-09-07 18:45:43.323 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 312
2024-09-07 18:45:43.326 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:45:43.328 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:45:43.331 +07:00 [INF] Received QUERY intent for devices: google/home/lock, google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/switch, google/home/vacuum, google/home/modeDevice
2024-09-07 18:45:43.333 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:45:43.335 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 5.7645ms
2024-09-07 18:45:43.336 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:45:43.337 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 312 - 200 641 application/json;+charset=utf-8 14.3326ms
2024-09-07 18:45:44.093 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 284
2024-09-07 18:45:44.096 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:45:44.097 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:45:44.106 +07:00 [INF] Received EXECUTE intent for commands: action.devices.commands.OnOff
2024-09-07 18:45:44.113 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:45:44.119 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 20.5101ms
2024-09-07 18:45:44.120 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:45:44.121 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 284 - 200 144 application/json;+charset=utf-8 27.2936ms
2024-09-07 18:45:44.126 +07:00 [INF] MQTT message received for topic google/home/lock/set: True
2024-09-07 18:45:44.128 +07:00 [WRN] WillReportState triggered but Google Home Graph serviceAccountFile setting was blank, or the file didn't exist
2024-09-07 18:45:44.155 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 193
2024-09-07 18:45:44.156 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:45:44.157 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:45:44.159 +07:00 [INF] Received QUERY intent for devices: google/home/vacuum, google/home/modeDevice, google/home/switch
2024-09-07 18:45:44.159 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:45:44.160 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.4809ms
2024-09-07 18:45:44.161 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:45:44.162 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 193 - 200 320 application/json;+charset=utf-8 7.0548ms
2024-09-07 18:45:44.302 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 223
2024-09-07 18:45:44.304 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:45:44.305 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:45:44.308 +07:00 [INF] Received QUERY intent for devices: google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/lock
2024-09-07 18:45:44.309 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:45:44.310 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 2.1874ms
2024-09-07 18:45:44.312 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:45:44.314 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 223 - 200 379 application/json;+charset=utf-8 12.1495ms
2024-09-07 18:45:51.189 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 284
2024-09-07 18:45:51.191 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:45:51.192 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:45:51.194 +07:00 [INF] Received EXECUTE intent for commands: action.devices.commands.OnOff
2024-09-07 18:45:51.195 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:45:51.196 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 2.0553ms
2024-09-07 18:45:51.197 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:45:51.198 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 284 - 200 144 application/json;+charset=utf-8 9.5378ms
2024-09-07 18:45:51.206 +07:00 [INF] MQTT message received for topic google/home/lock/set: False
2024-09-07 18:45:51.207 +07:00 [WRN] WillReportState triggered but Google Home Graph serviceAccountFile setting was blank, or the file didn't exist
2024-09-07 18:45:52.196 +07:00 [INF] Removing expired grants
2024-09-07 18:46:52.198 +07:00 [INF] Removing expired grants
2024-09-07 18:47:52.199 +07:00 [INF] Removing expired grants
2024-09-07 18:48:52.201 +07:00 [INF] Removing expired grants
2024-09-07 18:49:52.202 +07:00 [INF] Removing expired grants
2024-09-07 18:50:18.999 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 312
2024-09-07 18:50:19.001 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:50:19.002 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:50:19.004 +07:00 [INF] Received QUERY intent for devices: google/home/lock, google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/switch, google/home/vacuum, google/home/modeDevice
2024-09-07 18:50:19.004 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:50:19.006 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 2.5531ms
2024-09-07 18:50:19.007 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:50:19.007 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 312 - 200 641 application/json;+charset=utf-8 8.5947ms
2024-09-07 18:50:19.799 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 193
2024-09-07 18:50:19.801 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:50:19.802 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:50:19.803 +07:00 [INF] Received QUERY intent for devices: google/home/vacuum, google/home/modeDevice, google/home/switch
2024-09-07 18:50:19.804 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:50:19.805 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 2.1201ms
2024-09-07 18:50:19.806 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:50:19.809 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 193 - 200 320 application/json;+charset=utf-8 9.8108ms
2024-09-07 18:50:19.840 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 224
2024-09-07 18:50:19.842 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:50:19.844 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 18:50:19.845 +07:00 [INF] Received QUERY intent for devices: google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/lock
2024-09-07 18:50:19.846 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 18:50:19.847 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 2.0414ms
2024-09-07 18:50:19.848 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 18:50:19.849 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 224 - 200 381 application/json;+charset=utf-8 8.5763ms
2024-09-07 18:50:52.203 +07:00 [INF] Removing expired grants
2024-09-07 18:51:52.205 +07:00 [INF] Removing expired grants
2024-09-07 18:52:52.208 +07:00 [INF] Removing expired grants
2024-09-07 18:53:52.210 +07:00 [INF] Removing expired grants
2024-09-07 18:54:52.211 +07:00 [INF] Removing expired grants
2024-09-07 18:55:52.212 +07:00 [INF] Removing expired grants
2024-09-07 18:56:52.213 +07:00 [INF] Removing expired grants
2024-09-07 18:57:52.215 +07:00 [INF] Removing expired grants
2024-09-07 18:58:52.217 +07:00 [INF] Removing expired grants
2024-09-07 18:59:52.218 +07:00 [INF] Removing expired grants
2024-09-07 19:05:31.457 +07:00 [INF] Loaded with configuration from: appsettings.json, C:\homeautio\HomeAutio.Mqtt.GoogleHome-3.0.0.15\src\HomeAutio.Mqtt.GoogleHome\appsettings.Development.json
2024-09-07 19:05:31.732 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2024-09-07 19:05:31.778 +07:00 [INF] Restored tokens from config/tokens.json
2024-09-07 19:05:31.792 +07:00 [INF] Using the default authentication scheme Cookies for IdentityServer
2024-09-07 19:05:32.041 +07:00 [INF] Loaded device configuration from config/googleDevices.json
2024-09-07 19:05:32.058 +07:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-07 19:05:32.061 +07:00 [INF] Service start initiated
2024-09-07 19:05:32.063 +07:00 [INF] MQTT subscribing to the following topics: google/home/commands/+/set, google/home/dimmableLight, google/home/switch, google/home/light/123/brightness, google/home/lock/set, google/home/vacuum/docked, google/home/light/123/temp, google/home/light/123/pw, google/home/vacuum/paused, google/home/modeDevice
2024-09-07 19:05:32.066 +07:00 [INF] Started
2024-09-07 19:05:32.067 +07:00 [INF] Service started successfully
2024-09-07 19:05:32.119 +07:00 [INF] Now listening on: https://localhost:51293
2024-09-07 19:05:32.120 +07:00 [INF] Now listening on: http://localhost:51294
2024-09-07 19:05:32.148 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-07 19:05:32.149 +07:00 [INF] Hosting environment: Development
2024-09-07 19:05:32.150 +07:00 [INF] Content root path: C:\homeautio\HomeAutio.Mqtt.GoogleHome-3.0.0.15\src\HomeAutio.Mqtt.GoogleHome
2024-09-07 19:05:32.195 +07:00 [INF] Connected.
2024-09-07 19:05:32.199 +07:00 [INF] MQTT Connection established
2024-09-07 19:05:32.201 +07:00 [INF] Publishing subscriptions at reconnect
2024-09-07 19:05:32.897 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/GoogleDevice/Edit?deviceId=google%2Fhome%2Flight%2F123 - -
2024-09-07 19:05:32.963 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Edit (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:05:32.972 +07:00 [INF] Route matched with {action = "Edit", controller = "GoogleDevice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Edit(System.String) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:05:32.992 +07:00 [INF] Executing ViewResult, running view Edit.
2024-09-07 19:05:33.096 +07:00 [INF] Executed ViewResult - view Edit executed in 105.5867ms.
2024-09-07 19:05:33.099 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Edit (HomeAutio.Mqtt.GoogleHome) in 125.7394ms
2024-09-07 19:05:33.100 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleDeviceController.Edit (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:05:33.102 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/GoogleDevice/Edit?deviceId=google%2Fhome%2Flight%2F123 - - - 200 - text/html;+charset=utf-8 207.0029ms
2024-09-07 19:05:33.245 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - -
2024-09-07 19:05:33.248 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - - - 200 12382 application/javascript;+charset=utf-8 2.1650ms
2024-09-07 19:05:33.286 +07:00 [INF] Request starting HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_vs/browserLink - -
2024-09-07 19:05:33.302 +07:00 [INF] Request finished HTTP/1.1 GET http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.4439ms
2024-09-07 19:05:50.264 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 312
2024-09-07 19:05:50.286 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration - -
2024-09-07 19:05:50.295 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2024-09-07 19:05:50.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 25.1446ms
2024-09-07 19:05:50.329 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration/jwks - -
2024-09-07 19:05:50.332 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2024-09-07 19:05:50.338 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 9.1861ms
2024-09-07 19:05:50.377 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:05:50.380 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:05:50.397 +07:00 [INF] Received QUERY intent for devices: google/home/lock, google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/switch, google/home/vacuum, google/home/modeDevice
2024-09-07 19:05:50.412 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 19:05:50.421 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 39.5922ms
2024-09-07 19:05:50.422 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:05:50.426 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 312 - 200 641 application/json;+charset=utf-8 162.4924ms
2024-09-07 19:06:02.293 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 284
2024-09-07 19:06:02.297 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:06:02.298 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:06:02.310 +07:00 [INF] Received EXECUTE intent for commands: action.devices.commands.OnOff
2024-09-07 19:06:02.318 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 19:06:02.323 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 23.15ms
2024-09-07 19:06:02.324 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:06:02.327 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 284 - 200 144 application/json;+charset=utf-8 33.6050ms
2024-09-07 19:06:02.331 +07:00 [INF] MQTT message received for topic google/home/lock/set: True
2024-09-07 19:06:02.604 +07:00 [INF] Start processing HTTP request POST https://oauth2.googleapis.com/token
2024-09-07 19:06:02.605 +07:00 [INF] Sending HTTP request POST https://oauth2.googleapis.com/token
2024-09-07 19:06:02.795 +07:00 [INF] Received HTTP response headers after 187.8711ms - 200
2024-09-07 19:06:02.797 +07:00 [INF] End processing HTTP request after 194.4399ms - 200
2024-09-07 19:06:02.800 +07:00 [INF] Start processing HTTP request POST https://homegraph.googleapis.com/v1/devices:reportStateAndNotification
2024-09-07 19:06:02.800 +07:00 [INF] Sending HTTP request POST https://homegraph.googleapis.com/v1/devices:reportStateAndNotification
2024-09-07 19:06:03.226 +07:00 [INF] Received HTTP response headers after 424.8288ms - 400
2024-09-07 19:06:03.227 +07:00 [INF] End processing HTTP request after 427.161ms - 400
2024-09-07 19:06:03.228 +07:00 [WRN] Google Home Graph update failed for devices: google/home/lock
2024-09-07 19:06:32.068 +07:00 [INF] Removing expired grants
2024-09-07 19:06:37.806 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 312
2024-09-07 19:06:37.808 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:06:37.810 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:06:37.813 +07:00 [INF] Received QUERY intent for devices: google/home/lock, google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/switch, google/home/vacuum, google/home/modeDevice
2024-09-07 19:06:37.815 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 19:06:37.817 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 3.9905ms
2024-09-07 19:06:37.818 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:06:37.819 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 312 - 200 640 application/json;+charset=utf-8 13.1220ms
2024-09-07 19:06:38.614 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 224
2024-09-07 19:06:38.617 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:06:38.618 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:06:38.620 +07:00 [INF] Received QUERY intent for devices: google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/lock
2024-09-07 19:06:38.621 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 19:06:38.621 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.8416ms
2024-09-07 19:06:38.622 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:06:38.623 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 224 - 200 380 application/json;+charset=utf-8 9.1478ms
2024-09-07 19:06:38.745 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 192
2024-09-07 19:06:38.747 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:06:38.747 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:06:38.749 +07:00 [INF] Received QUERY intent for devices: google/home/modeDevice, google/home/vacuum, google/home/switch
2024-09-07 19:06:38.750 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 19:06:38.751 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.8376ms
2024-09-07 19:06:38.752 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:06:38.753 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 192 - 200 319 application/json;+charset=utf-8 8.1162ms
2024-09-07 19:07:32.072 +07:00 [INF] Removing expired grants
2024-09-07 19:08:32.077 +07:00 [INF] Removing expired grants
2024-09-07 19:09:32.079 +07:00 [INF] Removing expired grants
2024-09-07 19:10:32.080 +07:00 [INF] Removing expired grants
2024-09-07 19:11:32.081 +07:00 [INF] Removing expired grants
2024-09-07 19:12:32.083 +07:00 [INF] Removing expired grants
2024-09-07 19:13:32.087 +07:00 [INF] Removing expired grants
2024-09-07 19:14:32.088 +07:00 [INF] Removing expired grants
2024-09-07 19:15:32.089 +07:00 [INF] Removing expired grants
2024-09-07 19:16:32.090 +07:00 [INF] Removing expired grants
2024-09-07 19:17:32.092 +07:00 [INF] Removing expired grants
2024-09-07 19:18:10.566 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 313
2024-09-07 19:18:10.568 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:18:10.569 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:18:10.571 +07:00 [INF] Received QUERY intent for devices: google/home/lock, google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/switch, google/home/vacuum, google/home/modeDevice
2024-09-07 19:18:10.572 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 19:18:10.573 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 2.0114ms
2024-09-07 19:18:10.574 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:18:10.575 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 313 - 200 641 application/json;+charset=utf-8 8.9362ms
2024-09-07 19:18:11.440 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 224
2024-09-07 19:18:11.442 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:18:11.442 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:18:11.444 +07:00 [INF] Received QUERY intent for devices: google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/lock
2024-09-07 19:18:11.445 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 19:18:11.446 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.7806ms
2024-09-07 19:18:11.446 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:18:11.447 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 224 - 200 380 application/json;+charset=utf-8 7.3746ms
2024-09-07 19:18:11.589 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 193
2024-09-07 19:18:11.592 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:18:11.593 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:18:11.594 +07:00 [INF] Received QUERY intent for devices: google/home/modeDevice, google/home/vacuum, google/home/switch
2024-09-07 19:18:11.595 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 19:18:11.596 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.4585ms
2024-09-07 19:18:11.596 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:18:11.597 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 193 - 200 320 application/json;+charset=utf-8 7.8220ms
2024-09-07 19:18:15.052 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 289
2024-09-07 19:18:15.053 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:18:15.055 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:18:15.056 +07:00 [INF] Received EXECUTE intent for commands: action.devices.commands.OnOff
2024-09-07 19:18:15.057 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 19:18:15.058 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.6993ms
2024-09-07 19:18:15.059 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:18:15.060 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 289 - 200 149 application/json;+charset=utf-8 8.1488ms
2024-09-07 19:18:15.068 +07:00 [INF] MQTT message received for topic google/home/light/123/pw: True
2024-09-07 19:18:15.070 +07:00 [INF] Start processing HTTP request POST https://oauth2.googleapis.com/token
2024-09-07 19:18:15.071 +07:00 [INF] Sending HTTP request POST https://oauth2.googleapis.com/token
2024-09-07 19:18:15.183 +07:00 [INF] Received HTTP response headers after 110.7793ms - 200
2024-09-07 19:18:15.184 +07:00 [INF] End processing HTTP request after 113.5246ms - 200
2024-09-07 19:18:15.185 +07:00 [INF] Start processing HTTP request POST https://homegraph.googleapis.com/v1/devices:reportStateAndNotification
2024-09-07 19:18:15.186 +07:00 [INF] Sending HTTP request POST https://homegraph.googleapis.com/v1/devices:reportStateAndNotification
2024-09-07 19:18:15.725 +07:00 [INF] Received HTTP response headers after 539.0993ms - 400
2024-09-07 19:18:15.727 +07:00 [INF] End processing HTTP request after 542.182ms - 400
2024-09-07 19:18:15.728 +07:00 [WRN] Google Home Graph update failed for devices: google/home/light/123
2024-09-07 19:18:32.093 +07:00 [INF] Removing expired grants
2024-09-07 19:19:32.094 +07:00 [INF] Removing expired grants
2024-09-07 19:19:42.002 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 286
2024-09-07 19:19:42.003 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:19:42.004 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:19:42.006 +07:00 [INF] Received EXECUTE intent for commands: action.devices.commands.OnOff
2024-09-07 19:19:42.007 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 19:19:42.008 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.7205ms
2024-09-07 19:19:42.009 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:19:42.009 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 286 - 200 146 application/json;+charset=utf-8 7.8777ms
2024-09-07 19:19:57.170 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 313
2024-09-07 19:19:57.172 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:19:57.173 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:19:57.175 +07:00 [INF] Received QUERY intent for devices: google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/switch, google/home/vacuum, google/home/modeDevice, google/home/lock
2024-09-07 19:19:57.176 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 19:19:57.177 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 2.1483ms
2024-09-07 19:19:57.178 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:19:57.179 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 313 - 200 640 application/json;+charset=utf-8 8.3775ms
2024-09-07 19:20:00.744 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 285
2024-09-07 19:20:00.746 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:20:00.747 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 19:20:00.748 +07:00 [INF] Received EXECUTE intent for commands: action.devices.commands.OnOff
2024-09-07 19:20:00.749 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 19:20:00.750 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 2.0439ms
2024-09-07 19:20:00.753 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 19:20:00.755 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 285 - 200 145 application/json;+charset=utf-8 10.7821ms
2024-09-07 19:20:32.094 +07:00 [INF] Removing expired grants
2024-09-07 19:21:32.095 +07:00 [INF] Removing expired grants
2024-09-07 19:22:32.097 +07:00 [INF] Removing expired grants
2024-09-07 19:23:32.098 +07:00 [INF] Removing expired grants
2024-09-07 19:24:32.100 +07:00 [INF] Removing expired grants
2024-09-07 19:25:32.101 +07:00 [INF] Removing expired grants
2024-09-07 19:26:32.102 +07:00 [INF] Removing expired grants
2024-09-07 19:27:32.102 +07:00 [INF] Removing expired grants
2024-09-07 19:28:32.104 +07:00 [INF] Removing expired grants
2024-09-07 19:29:32.106 +07:00 [INF] Removing expired grants
2024-09-07 19:30:32.107 +07:00 [INF] Removing expired grants
2024-09-07 19:31:32.108 +07:00 [INF] Removing expired grants
2024-09-07 19:32:32.110 +07:00 [INF] Removing expired grants
2024-09-07 19:33:32.110 +07:00 [INF] Removing expired grants
2024-09-07 19:34:32.112 +07:00 [INF] Removing expired grants
2024-09-07 19:35:32.113 +07:00 [INF] Removing expired grants
2024-09-07 19:36:32.115 +07:00 [INF] Removing expired grants
2024-09-07 19:37:32.116 +07:00 [INF] Removing expired grants
2024-09-07 19:38:32.118 +07:00 [INF] Removing expired grants
2024-09-07 19:39:32.120 +07:00 [INF] Removing expired grants
2024-09-07 19:40:32.121 +07:00 [INF] Removing expired grants
2024-09-07 19:41:32.122 +07:00 [INF] Removing expired grants
2024-09-07 19:42:32.124 +07:00 [INF] Removing expired grants
2024-09-07 19:43:32.125 +07:00 [INF] Removing expired grants
2024-09-07 19:44:32.126 +07:00 [INF] Removing expired grants
2024-09-07 19:45:32.127 +07:00 [INF] Removing expired grants
2024-09-07 19:46:32.128 +07:00 [INF] Removing expired grants
2024-09-07 19:47:32.130 +07:00 [INF] Removing expired grants
2024-09-07 19:48:32.131 +07:00 [INF] Removing expired grants
2024-09-07 19:49:32.132 +07:00 [INF] Removing expired grants
2024-09-07 19:50:32.133 +07:00 [INF] Removing expired grants
2024-09-07 19:51:32.135 +07:00 [INF] Removing expired grants
2024-09-07 19:52:32.137 +07:00 [INF] Removing expired grants
2024-09-07 19:53:32.137 +07:00 [INF] Removing expired grants
2024-09-07 19:54:32.138 +07:00 [INF] Removing expired grants
2024-09-07 19:55:32.140 +07:00 [INF] Removing expired grants
2024-09-07 19:56:32.141 +07:00 [INF] Removing expired grants
2024-09-07 19:57:32.143 +07:00 [INF] Removing expired grants
2024-09-07 19:58:32.144 +07:00 [INF] Removing expired grants
2024-09-07 19:59:32.145 +07:00 [INF] Removing expired grants
2024-09-07 20:00:32.147 +07:00 [INF] Removing expired grants
2024-09-07 20:01:32.149 +07:00 [INF] Removing expired grants
2024-09-07 20:02:32.150 +07:00 [INF] Removing expired grants
2024-09-07 20:03:32.153 +07:00 [INF] Removing expired grants
2024-09-07 20:04:32.153 +07:00 [INF] Removing expired grants
2024-09-07 20:05:32.154 +07:00 [INF] Removing expired grants
2024-09-07 20:06:32.155 +07:00 [INF] Removing expired grants
2024-09-07 20:07:32.156 +07:00 [INF] Removing expired grants
2024-09-07 20:08:32.157 +07:00 [INF] Removing expired grants
2024-09-07 20:09:32.158 +07:00 [INF] Removing expired grants
2024-09-07 20:10:32.159 +07:00 [INF] Removing expired grants
2024-09-07 20:11:32.161 +07:00 [INF] Removing expired grants
2024-09-07 20:12:32.163 +07:00 [INF] Removing expired grants
2024-09-07 20:13:32.164 +07:00 [INF] Removing expired grants
2024-09-07 20:14:32.166 +07:00 [INF] Removing expired grants
2024-09-07 20:15:32.167 +07:00 [INF] Removing expired grants
2024-09-07 20:16:32.169 +07:00 [INF] Removing expired grants
2024-09-07 20:17:32.170 +07:00 [INF] Removing expired grants
2024-09-07 20:18:32.171 +07:00 [INF] Removing expired grants
2024-09-07 20:19:32.172 +07:00 [INF] Removing expired grants
2024-09-07 20:20:32.173 +07:00 [INF] Removing expired grants
2024-09-07 20:21:32.175 +07:00 [INF] Removing expired grants
2024-09-07 20:22:32.177 +07:00 [INF] Removing expired grants
2024-09-07 20:23:32.179 +07:00 [INF] Removing expired grants
2024-09-07 20:24:32.180 +07:00 [INF] Removing expired grants
2024-09-07 20:25:32.183 +07:00 [INF] Removing expired grants
2024-09-07 20:26:32.185 +07:00 [INF] Removing expired grants
2024-09-07 20:27:32.187 +07:00 [INF] Removing expired grants
2024-09-07 20:28:32.188 +07:00 [INF] Removing expired grants
2024-09-07 20:29:32.190 +07:00 [INF] Removing expired grants
2024-09-07 20:30:32.192 +07:00 [INF] Removing expired grants
2024-09-07 20:31:32.193 +07:00 [INF] Removing expired grants
2024-09-07 20:32:32.195 +07:00 [INF] Removing expired grants
2024-09-07 20:33:32.195 +07:00 [INF] Removing expired grants
2024-09-07 20:34:32.196 +07:00 [INF] Removing expired grants
2024-09-07 20:35:32.196 +07:00 [INF] Removing expired grants
2024-09-07 20:36:32.198 +07:00 [INF] Removing expired grants
2024-09-07 20:37:32.199 +07:00 [INF] Removing expired grants
2024-09-07 20:38:32.201 +07:00 [INF] Removing expired grants
2024-09-07 20:39:32.202 +07:00 [INF] Removing expired grants
2024-09-07 20:40:32.204 +07:00 [INF] Removing expired grants
2024-09-07 20:41:32.205 +07:00 [INF] Removing expired grants
2024-09-07 20:42:32.206 +07:00 [INF] Removing expired grants
2024-09-07 20:43:32.207 +07:00 [INF] Removing expired grants
2024-09-07 20:44:32.209 +07:00 [INF] Removing expired grants
2024-09-07 20:45:32.210 +07:00 [INF] Removing expired grants
2024-09-07 20:46:32.210 +07:00 [INF] Removing expired grants
2024-09-07 20:47:32.213 +07:00 [INF] Removing expired grants
2024-09-07 20:48:32.214 +07:00 [INF] Removing expired grants
2024-09-07 20:49:32.215 +07:00 [INF] Removing expired grants
2024-09-07 20:50:32.216 +07:00 [INF] Removing expired grants
2024-09-07 20:51:32.217 +07:00 [INF] Removing expired grants
2024-09-07 20:52:32.217 +07:00 [INF] Removing expired grants
2024-09-07 20:53:32.219 +07:00 [INF] Removing expired grants
2024-09-07 20:54:32.220 +07:00 [INF] Removing expired grants
2024-09-07 20:55:32.222 +07:00 [INF] Removing expired grants
2024-09-07 20:56:32.223 +07:00 [INF] Removing expired grants
2024-09-07 20:57:32.225 +07:00 [INF] Removing expired grants
2024-09-07 20:58:32.227 +07:00 [INF] Removing expired grants
2024-09-07 20:59:32.228 +07:00 [INF] Removing expired grants
2024-09-07 21:00:32.230 +07:00 [INF] Removing expired grants
2024-09-07 21:01:32.232 +07:00 [INF] Removing expired grants
2024-09-07 21:02:32.233 +07:00 [INF] Removing expired grants
2024-09-07 21:03:32.234 +07:00 [INF] Removing expired grants
2024-09-07 21:04:32.236 +07:00 [INF] Removing expired grants
2024-09-07 21:05:32.237 +07:00 [INF] Removing expired grants
2024-09-07 21:06:32.239 +07:00 [INF] Removing expired grants
2024-09-07 21:07:32.240 +07:00 [INF] Removing expired grants
2024-09-07 21:08:32.242 +07:00 [INF] Removing expired grants
2024-09-07 21:09:32.243 +07:00 [INF] Removing expired grants
2024-09-07 21:10:32.244 +07:00 [INF] Removing expired grants
2024-09-07 21:11:32.245 +07:00 [INF] Removing expired grants
2024-09-07 21:12:32.246 +07:00 [INF] Removing expired grants
2024-09-07 21:13:32.248 +07:00 [INF] Removing expired grants
2024-09-07 21:14:32.250 +07:00 [INF] Removing expired grants
2024-09-07 21:15:32.251 +07:00 [INF] Removing expired grants
2024-09-07 21:16:32.252 +07:00 [INF] Removing expired grants
2024-09-07 21:17:32.253 +07:00 [INF] Removing expired grants
2024-09-07 21:18:32.255 +07:00 [INF] Removing expired grants
2024-09-07 21:19:32.257 +07:00 [INF] Removing expired grants
2024-09-07 21:20:32.259 +07:00 [INF] Removing expired grants
2024-09-07 21:21:32.261 +07:00 [INF] Removing expired grants
2024-09-07 21:22:32.263 +07:00 [INF] Removing expired grants
2024-09-07 21:23:32.263 +07:00 [INF] Removing expired grants
2024-09-07 21:24:32.264 +07:00 [INF] Removing expired grants
2024-09-07 21:25:32.266 +07:00 [INF] Removing expired grants
2024-09-07 21:26:32.267 +07:00 [INF] Removing expired grants
2024-09-07 21:27:32.267 +07:00 [INF] Removing expired grants
2024-09-07 21:28:32.268 +07:00 [INF] Removing expired grants
2024-09-07 21:29:32.270 +07:00 [INF] Removing expired grants
2024-09-07 21:30:32.271 +07:00 [INF] Removing expired grants
2024-09-07 21:31:32.273 +07:00 [INF] Removing expired grants
2024-09-07 21:32:32.274 +07:00 [INF] Removing expired grants
2024-09-07 21:33:32.276 +07:00 [INF] Removing expired grants
2024-09-07 21:34:32.278 +07:00 [INF] Removing expired grants
2024-09-07 21:35:32.280 +07:00 [INF] Removing expired grants
2024-09-07 21:36:32.281 +07:00 [INF] Removing expired grants
2024-09-07 21:37:32.282 +07:00 [INF] Removing expired grants
2024-09-07 21:38:32.284 +07:00 [INF] Removing expired grants
2024-09-07 21:39:17.949 +07:00 [INF] Loaded with configuration from: appsettings.json, C:\homeautio\HomeAutio.Mqtt.GoogleHome-3.0.0.15\src\HomeAutio.Mqtt.GoogleHome\appsettings.Development.json
2024-09-07 21:39:18.225 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2024-09-07 21:39:18.271 +07:00 [INF] Restored tokens from config/tokens.json
2024-09-07 21:39:18.286 +07:00 [INF] Using the default authentication scheme Cookies for IdentityServer
2024-09-07 21:39:18.534 +07:00 [INF] Loaded device configuration from config/googleDevices.json
2024-09-07 21:39:18.551 +07:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-07 21:39:18.555 +07:00 [INF] Service start initiated
2024-09-07 21:39:18.557 +07:00 [INF] MQTT subscribing to the following topics: google/home/commands/+/set, google/home/light/123/pw, google/home/light/123/temp, google/home/modeDevice, google/home/vacuum/paused, google/home/dimmableLight, google/home/switch, google/home/vacuum/docked, google/home/lock/set, google/home/light/123/brightness
2024-09-07 21:39:18.561 +07:00 [INF] Started
2024-09-07 21:39:18.562 +07:00 [INF] Service started successfully
2024-09-07 21:39:18.614 +07:00 [INF] Now listening on: https://localhost:51293
2024-09-07 21:39:18.615 +07:00 [INF] Now listening on: http://localhost:51294
2024-09-07 21:39:18.643 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-07 21:39:18.645 +07:00 [INF] Hosting environment: Development
2024-09-07 21:39:18.645 +07:00 [INF] Content root path: C:\homeautio\HomeAutio.Mqtt.GoogleHome-3.0.0.15\src\HomeAutio.Mqtt.GoogleHome
2024-09-07 21:39:18.713 +07:00 [INF] Connected.
2024-09-07 21:39:18.718 +07:00 [INF] MQTT Connection established
2024-09-07 21:39:18.720 +07:00 [INF] Publishing subscriptions at reconnect
2024-09-07 21:39:36.225 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/connect/token application/x-www-form-urlencoded 201
2024-09-07 21:39:36.267 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2024-09-07 21:39:36.313 +07:00 [INF] Token request validation success, {"ClientId":"00000000-0000-0000-0000-000000000000","ClientName":"Google Actions Client","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"****5839","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","refresh_token":"***REDACTED***","client_id":"00000000-0000-0000-0000-000000000000","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2024-09-07 21:39:36.368 +07:00 [INF] Writing tokens to config/tokens.json
2024-09-07 21:39:36.372 +07:00 [INF] Wrote tokens to config/tokens.json
2024-09-07 21:39:36.375 +07:00 [INF] Writing tokens to config/tokens.json
2024-09-07 21:39:36.391 +07:00 [INF] Wrote tokens to config/tokens.json
2024-09-07 21:39:36.409 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/connect/token application/x-www-form-urlencoded 201 - 200 - application/json;+charset=UTF-8 185.0799ms
2024-09-07 21:39:37.059 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 313
2024-09-07 21:39:37.059 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 192
2024-09-07 21:39:37.059 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 225
2024-09-07 21:39:37.100 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration - -
2024-09-07 21:39:37.103 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2024-09-07 21:39:37.114 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 13.6242ms
2024-09-07 21:39:37.135 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration/jwks - -
2024-09-07 21:39:37.139 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2024-09-07 21:39:37.145 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 9.5149ms
2024-09-07 21:39:37.168 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:39:37.168 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:39:37.168 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:39:37.179 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 21:39:37.179 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 21:39:37.179 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 21:39:37.207 +07:00 [INF] Received QUERY intent for devices: google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/lock
2024-09-07 21:39:37.207 +07:00 [INF] Received QUERY intent for devices: google/home/modeDevice, google/home/vacuum, google/home/switch
2024-09-07 21:39:37.207 +07:00 [INF] Received QUERY intent for devices: google/home/lock, google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/switch, google/home/vacuum, google/home/modeDevice
2024-09-07 21:39:37.222 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 21:39:37.222 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 21:39:37.222 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 21:39:37.233 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 49.0729ms
2024-09-07 21:39:37.233 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 46.1786ms
2024-09-07 21:39:37.233 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 47.7133ms
2024-09-07 21:39:37.235 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:39:37.237 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:39:37.238 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:39:37.239 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 225 - 200 382 application/json;+charset=utf-8 180.0737ms
2024-09-07 21:39:37.240 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 313 - 200 642 application/json;+charset=utf-8 181.1063ms
2024-09-07 21:39:37.240 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 192 - 200 319 application/json;+charset=utf-8 181.8259ms
2024-09-07 21:39:53.217 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 288
2024-09-07 21:39:53.221 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:39:53.221 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 21:39:53.230 +07:00 [INF] Received EXECUTE intent for commands: action.devices.commands.OnOff
2024-09-07 21:39:53.238 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 21:39:53.243 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 19.7498ms
2024-09-07 21:39:53.244 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:39:53.246 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 288 - 200 148 application/json;+charset=utf-8 28.6815ms
2024-09-07 21:39:53.251 +07:00 [INF] MQTT message received for topic google/home/light/123/pw: True
2024-09-07 21:39:53.289 +07:00 [INF] Start processing HTTP request POST https://oauth2.googleapis.com/token
2024-09-07 21:39:53.290 +07:00 [INF] Sending HTTP request POST https://oauth2.googleapis.com/token
2024-09-07 21:39:53.492 +07:00 [INF] Received HTTP response headers after 199.4741ms - 200
2024-09-07 21:39:53.494 +07:00 [INF] End processing HTTP request after 205.6277ms - 200
2024-09-07 21:39:53.495 +07:00 [INF] Start processing HTTP request POST https://homegraph.googleapis.com/v1/devices:reportStateAndNotification
2024-09-07 21:39:53.496 +07:00 [INF] Sending HTTP request POST https://homegraph.googleapis.com/v1/devices:reportStateAndNotification
2024-09-07 21:39:54.109 +07:00 [INF] Received HTTP response headers after 612.257ms - 404
2024-09-07 21:39:54.110 +07:00 [INF] End processing HTTP request after 615.0166ms - 404
2024-09-07 21:39:54.112 +07:00 [WRN] Google Home Graph update failed for devices: google/home/light/123
2024-09-07 21:40:18.563 +07:00 [INF] Removing expired grants
2024-09-07 21:40:18.566 +07:00 [INF] Writing tokens to config/tokens.json
2024-09-07 21:40:18.567 +07:00 [INF] Wrote tokens to config/tokens.json
2024-09-07 21:41:18.567 +07:00 [INF] Removing expired grants
2024-09-07 21:42:18.569 +07:00 [INF] Removing expired grants
2024-09-07 21:43:18.569 +07:00 [INF] Removing expired grants
2024-09-07 21:43:30.955 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 311
2024-09-07 21:43:30.958 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:43:30.959 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 21:43:30.960 +07:00 [INF] Received QUERY intent for devices: google/home/lock, google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/switch, google/home/vacuum, google/home/modeDevice
2024-09-07 21:43:30.961 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 21:43:30.962 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.9012ms
2024-09-07 21:43:30.963 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:43:30.964 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 311 - 200 639 application/json;+charset=utf-8 8.5339ms
2024-09-07 21:44:18.570 +07:00 [INF] Removing expired grants
2024-09-07 21:45:18.571 +07:00 [INF] Removing expired grants
2024-09-07 21:46:18.574 +07:00 [INF] Removing expired grants
2024-09-07 21:47:18.575 +07:00 [INF] Removing expired grants
2024-09-07 21:48:18.575 +07:00 [INF] Removing expired grants
2024-09-07 21:49:18.577 +07:00 [INF] Removing expired grants
2024-09-07 21:50:18.579 +07:00 [INF] Removing expired grants
2024-09-07 21:50:32.688 +07:00 [INF] Loaded with configuration from: appsettings.json, C:\homeautio\HomeAutio.Mqtt.GoogleHome-3.0.0.15\src\HomeAutio.Mqtt.GoogleHome\appsettings.Development.json
2024-09-07 21:50:32.962 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2024-09-07 21:50:33.007 +07:00 [INF] Restored tokens from config/tokens.json
2024-09-07 21:50:33.022 +07:00 [INF] Using the default authentication scheme Cookies for IdentityServer
2024-09-07 21:50:33.261 +07:00 [INF] Loaded device configuration from config/googleDevices.json
2024-09-07 21:50:33.277 +07:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-07 21:50:33.281 +07:00 [INF] Service start initiated
2024-09-07 21:50:33.284 +07:00 [INF] MQTT subscribing to the following topics: google/home/commands/+/set, google/home/lock/set, google/home/modeDevice, google/home/vacuum/docked, google/home/dimmableLight, google/home/light/123/brightness, google/home/switch, google/home/light/123/temp, google/home/vacuum/paused, google/home/light/123/pw
2024-09-07 21:50:33.287 +07:00 [INF] Started
2024-09-07 21:50:33.288 +07:00 [INF] Service started successfully
2024-09-07 21:50:33.336 +07:00 [INF] Connected.
2024-09-07 21:50:33.341 +07:00 [INF] MQTT Connection established
2024-09-07 21:50:33.343 +07:00 [INF] Publishing subscriptions at reconnect
2024-09-07 21:50:33.345 +07:00 [INF] Now listening on: https://localhost:51293
2024-09-07 21:50:33.346 +07:00 [INF] Now listening on: http://localhost:51294
2024-09-07 21:50:33.374 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-07 21:50:33.376 +07:00 [INF] Hosting environment: Development
2024-09-07 21:50:33.376 +07:00 [INF] Content root path: C:\homeautio\HomeAutio.Mqtt.GoogleHome-3.0.0.15\src\HomeAutio.Mqtt.GoogleHome
2024-09-07 21:50:41.058 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 312
2024-09-07 21:50:41.126 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration - -
2024-09-07 21:50:41.139 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2024-09-07 21:50:41.156 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 29.4947ms
2024-09-07 21:50:41.180 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration/jwks - -
2024-09-07 21:50:41.183 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2024-09-07 21:50:41.190 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:51294/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 9.5818ms
2024-09-07 21:50:41.232 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:50:41.242 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 21:50:41.271 +07:00 [INF] Received QUERY intent for devices: google/home/lock, google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/switch, google/home/vacuum, google/home/modeDevice
2024-09-07 21:50:41.287 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 21:50:41.299 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 49.628ms
2024-09-07 21:50:41.302 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:50:41.303 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 312 - 200 641 application/json;+charset=utf-8 246.9008ms
2024-09-07 21:50:46.655 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 289
2024-09-07 21:50:46.659 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:50:46.661 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 21:50:46.671 +07:00 [INF] Received EXECUTE intent for commands: action.devices.commands.OnOff
2024-09-07 21:50:46.679 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 21:50:46.684 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 21.5207ms
2024-09-07 21:50:46.686 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 21:50:46.689 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 289 - 200 149 application/json;+charset=utf-8 33.5822ms
2024-09-07 21:50:46.692 +07:00 [INF] MQTT message received for topic google/home/light/123/pw: True
2024-09-07 21:50:46.734 +07:00 [INF] Start processing HTTP request POST https://oauth2.googleapis.com/token
2024-09-07 21:50:46.736 +07:00 [INF] Sending HTTP request POST https://oauth2.googleapis.com/token
2024-09-07 21:50:46.925 +07:00 [INF] Received HTTP response headers after 186.6423ms - 200
2024-09-07 21:50:46.927 +07:00 [INF] End processing HTTP request after 193.8203ms - 200
2024-09-07 21:50:46.929 +07:00 [INF] Start processing HTTP request POST https://homegraph.googleapis.com/v1/devices:reportStateAndNotification
2024-09-07 21:50:46.930 +07:00 [INF] Sending HTTP request POST https://homegraph.googleapis.com/v1/devices:reportStateAndNotification
2024-09-07 21:50:47.411 +07:00 [INF] Received HTTP response headers after 480.7475ms - 404
2024-09-07 21:50:47.413 +07:00 [INF] End processing HTTP request after 484.2405ms - 404
2024-09-07 21:50:47.415 +07:00 [WRN] Google Home Graph update failed for devices: google/home/light/123
2024-09-07 21:51:33.291 +07:00 [INF] Removing expired grants
2024-09-07 21:51:47.512 +07:00 [INF] MQTT message received for topic google/home/commands/REQUEST_SYNC/set: True
2024-09-07 21:51:47.516 +07:00 [INF] Start processing HTTP request POST https://oauth2.googleapis.com/token
2024-09-07 21:51:47.516 +07:00 [INF] Sending HTTP request POST https://oauth2.googleapis.com/token
2024-09-07 21:51:47.558 +07:00 [INF] Received HTTP response headers after 41.2016ms - 200
2024-09-07 21:51:47.559 +07:00 [INF] End processing HTTP request after 43.0047ms - 200
2024-09-07 21:51:47.560 +07:00 [INF] Start processing HTTP request POST https://homegraph.googleapis.com/v1/devices:requestSync
2024-09-07 21:51:47.561 +07:00 [INF] Sending HTTP request POST https://homegraph.googleapis.com/v1/devices:requestSync
2024-09-07 21:51:47.824 +07:00 [INF] Received HTTP response headers after 262.84ms - 404
2024-09-07 21:51:47.826 +07:00 [INF] End processing HTTP request after 265.8769ms - 404
2024-09-07 21:51:47.827 +07:00 [WRN] Google Home Graph REQUEST_SYNC failed
2024-09-07 21:52:33.294 +07:00 [INF] Removing expired grants
2024-09-07 21:53:33.295 +07:00 [INF] Removing expired grants
2024-09-07 21:54:33.297 +07:00 [INF] Removing expired grants
2024-09-07 21:55:33.298 +07:00 [INF] Removing expired grants
2024-09-07 21:56:33.300 +07:00 [INF] Removing expired grants
2024-09-07 21:57:33.302 +07:00 [INF] Removing expired grants
2024-09-07 21:58:33.304 +07:00 [INF] Removing expired grants
2024-09-07 21:59:33.306 +07:00 [INF] Removing expired grants
2024-09-07 22:00:33.307 +07:00 [INF] Removing expired grants
2024-09-07 22:01:33.308 +07:00 [INF] Removing expired grants
2024-09-07 22:02:33.310 +07:00 [INF] Removing expired grants
2024-09-07 22:03:33.311 +07:00 [INF] Removing expired grants
2024-09-07 22:04:33.311 +07:00 [INF] Removing expired grants
2024-09-07 22:05:35.125 +07:00 [INF] Removing expired grants
2024-09-07 22:06:35.127 +07:00 [INF] Removing expired grants
2024-09-07 22:06:57.174 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 313
2024-09-07 22:06:57.178 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 22:06:57.179 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 22:06:57.182 +07:00 [INF] Received QUERY intent for devices: google/home/lock, google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/switch, google/home/vacuum, google/home/modeDevice
2024-09-07 22:06:57.184 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 22:06:57.186 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 5.2198ms
2024-09-07 22:06:57.188 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 22:06:57.189 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 313 - 200 641 application/json;+charset=utf-8 15.0461ms
2024-09-07 22:06:58.104 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 192
2024-09-07 22:06:58.106 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 22:06:58.107 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 22:06:58.108 +07:00 [INF] Received QUERY intent for devices: google/home/modeDevice, google/home/vacuum, google/home/switch
2024-09-07 22:06:58.109 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 22:06:58.109 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 1.742ms
2024-09-07 22:06:58.111 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 22:06:58.111 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 192 - 200 319 application/json;+charset=utf-8 7.4220ms
2024-09-07 22:06:58.234 +07:00 [INF] Request starting HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 224
2024-09-07 22:06:58.236 +07:00 [INF] Executing endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 22:06:58.237 +07:00 [INF] Route matched with {action = "Post", controller = "GoogleHome"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Post(HomeAutio.Mqtt.GoogleHome.Models.Request.Request) on controller HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController (HomeAutio.Mqtt.GoogleHome).
2024-09-07 22:06:58.239 +07:00 [INF] Received QUERY intent for devices: google/home/light/123, google/home/dimmableLight, google/home/camera, google/home/lock
2024-09-07 22:06:58.240 +07:00 [INF] Executing OkObjectResult, writing value of type 'HomeAutio.Mqtt.GoogleHome.Models.Response.Response'.
2024-09-07 22:06:58.241 +07:00 [INF] Executed action HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome) in 2.2187ms
2024-09-07 22:06:58.242 +07:00 [INF] Executed endpoint 'HomeAutio.Mqtt.GoogleHome.Controllers.GoogleHomeController.Post (HomeAutio.Mqtt.GoogleHome)'
2024-09-07 22:06:58.246 +07:00 [INF] Request finished HTTP/1.1 POST http://e8c8-2402-800-610d-412a-f9a5-d3bb-917e-a908.ngrok-free.app/smarthome application/json;charset=UTF-8 224 - 200 380 application/json;+charset=utf-8 11.3673ms
2024-09-07 22:07:35.128 +07:00 [INF] Removing expired grants
2024-09-07 22:08:35.129 +07:00 [INF] Removing expired grants
2024-09-07 22:09:35.130 +07:00 [INF] Removing expired grants
2024-09-07 22:10:35.131 +07:00 [INF] Removing expired grants
2024-09-07 22:11:35.133 +07:00 [INF] Removing expired grants
2024-09-07 22:12:35.135 +07:00 [INF] Removing expired grants
2024-09-07 22:13:35.136 +07:00 [INF] Removing expired grants
2024-09-07 22:14:14.752 +07:00 [INF] MQTT message received for topic google/home/commands/REQUEST_SYNC/set: True
2024-09-07 22:14:14.754 +07:00 [INF] Start processing HTTP request POST https://oauth2.googleapis.com/token
2024-09-07 22:14:14.755 +07:00 [INF] Sending HTTP request POST https://oauth2.googleapis.com/token
2024-09-07 22:14:14.869 +07:00 [INF] Received HTTP response headers after 113.6856ms - 200
2024-09-07 22:14:14.870 +07:00 [INF] End processing HTTP request after 116.278ms - 200
2024-09-07 22:14:14.872 +07:00 [INF] Start processing HTTP request POST https://homegraph.googleapis.com/v1/devices:requestSync
2024-09-07 22:14:14.872 +07:00 [INF] Sending HTTP request POST https://homegraph.googleapis.com/v1/devices:requestSync
2024-09-07 22:14:15.252 +07:00 [INF] Received HTTP response headers after 378.878ms - 404
2024-09-07 22:14:15.254 +07:00 [INF] End processing HTTP request after 381.9855ms - 404
2024-09-07 22:14:15.255 +07:00 [WRN] Google Home Graph REQUEST_SYNC failed
2024-09-07 22:14:35.137 +07:00 [INF] Removing expired grants
2024-09-07 22:15:35.139 +07:00 [INF] Removing expired grants
2024-09-07 22:16:35.139 +07:00 [INF] Removing expired grants
2024-09-07 22:17:35.140 +07:00 [INF] Removing expired grants
2024-09-07 22:18:35.141 +07:00 [INF] Removing expired grants
2024-09-07 22:19:35.142 +07:00 [INF] Removing expired grants
2024-09-07 22:20:35.144 +07:00 [INF] Removing expired grants
2024-09-07 22:21:35.145 +07:00 [INF] Removing expired grants
2024-09-07 22:22:35.146 +07:00 [INF] Removing expired grants
2024-09-07 22:23:35.148 +07:00 [INF] Removing expired grants
2024-09-07 22:24:35.150 +07:00 [INF] Removing expired grants
2024-09-07 22:25:35.152 +07:00 [INF] Removing expired grants
2024-09-07 22:26:35.153 +07:00 [INF] Removing expired grants
2024-09-07 22:27:35.154 +07:00 [INF] Removing expired grants
2024-09-07 22:28:35.155 +07:00 [INF] Removing expired grants
2024-09-07 22:29:35.157 +07:00 [INF] Removing expired grants
2024-09-07 22:30:35.158 +07:00 [INF] Removing expired grants
2024-09-07 22:31:35.160 +07:00 [INF] Removing expired grants
2024-09-07 22:32:35.161 +07:00 [INF] Removing expired grants
2024-09-07 22:33:35.163 +07:00 [INF] Removing expired grants
2024-09-07 22:34:35.164 +07:00 [INF] Removing expired grants
2024-09-07 22:35:35.166 +07:00 [INF] Removing expired grants
2024-09-07 22:36:35.167 +07:00 [INF] Removing expired grants
2024-09-07 22:37:35.168 +07:00 [INF] Removing expired grants
2024-09-07 22:38:35.169 +07:00 [INF] Removing expired grants
2024-09-07 22:39:35.170 +07:00 [INF] Removing expired grants
2024-09-07 22:40:35.170 +07:00 [INF] Removing expired grants
2024-09-07 22:41:35.172 +07:00 [INF] Removing expired grants
2024-09-07 22:42:35.172 +07:00 [INF] Removing expired grants
2024-09-07 22:43:35.173 +07:00 [INF] Removing expired grants
2024-09-07 22:44:35.173 +07:00 [INF] Removing expired grants
2024-09-07 22:45:35.174 +07:00 [INF] Removing expired grants
2024-09-07 22:46:35.176 +07:00 [INF] Removing expired grants
2024-09-07 22:47:35.178 +07:00 [INF] Removing expired grants
2024-09-07 22:48:35.179 +07:00 [INF] Removing expired grants
2024-09-07 22:49:35.181 +07:00 [INF] Removing expired grants
2024-09-07 22:50:35.183 +07:00 [INF] Removing expired grants
2024-09-07 22:51:35.184 +07:00 [INF] Removing expired grants
2024-09-07 22:52:35.185 +07:00 [INF] Removing expired grants
2024-09-07 22:53:35.186 +07:00 [INF] Removing expired grants
2024-09-07 22:54:35.187 +07:00 [INF] Removing expired grants
2024-09-07 22:55:35.188 +07:00 [INF] Removing expired grants
2024-09-07 22:56:35.189 +07:00 [INF] Removing expired grants
2024-09-07 22:57:35.192 +07:00 [INF] Removing expired grants
2024-09-07 22:58:35.193 +07:00 [INF] Removing expired grants
2024-09-07 22:59:35.195 +07:00 [INF] Removing expired grants
2024-09-07 23:00:35.197 +07:00 [INF] Removing expired grants
2024-09-07 23:01:35.199 +07:00 [INF] Removing expired grants
2024-09-07 23:02:35.201 +07:00 [INF] Removing expired grants
2024-09-07 23:03:35.202 +07:00 [INF] Removing expired grants
2024-09-07 23:04:35.203 +07:00 [INF] Removing expired grants
2024-09-07 23:05:35.205 +07:00 [INF] Removing expired grants
2024-09-07 23:06:35.207 +07:00 [INF] Removing expired grants
2024-09-07 23:07:35.208 +07:00 [INF] Removing expired grants
2024-09-07 23:08:35.209 +07:00 [INF] Removing expired grants
2024-09-07 23:09:35.210 +07:00 [INF] Removing expired grants
2024-09-07 23:10:35.211 +07:00 [INF] Removing expired grants
2024-09-07 23:11:35.213 +07:00 [INF] Removing expired grants
2024-09-07 23:12:35.215 +07:00 [INF] Removing expired grants
2024-09-07 23:13:35.216 +07:00 [INF] Removing expired grants
2024-09-07 23:14:35.218 +07:00 [INF] Removing expired grants
2024-09-07 23:15:35.219 +07:00 [INF] Removing expired grants
2024-09-07 23:16:35.221 +07:00 [INF] Removing expired grants
2024-09-07 23:17:35.223 +07:00 [INF] Removing expired grants
2024-09-07 23:18:35.225 +07:00 [INF] Removing expired grants
2024-09-07 23:19:35.226 +07:00 [INF] Removing expired grants
2024-09-07 23:20:35.227 +07:00 [INF] Removing expired grants
2024-09-07 23:21:35.228 +07:00 [INF] Removing expired grants
2024-09-07 23:22:35.230 +07:00 [INF] Removing expired grants
2024-09-07 23:23:35.231 +07:00 [INF] Removing expired grants
2024-09-07 23:24:35.233 +07:00 [INF] Removing expired grants
2024-09-07 23:25:35.235 +07:00 [INF] Removing expired grants
2024-09-07 23:26:35.236 +07:00 [INF] Removing expired grants
2024-09-07 23:27:35.236 +07:00 [INF] Removing expired grants
2024-09-07 23:28:35.237 +07:00 [INF] Removing expired grants
2024-09-07 23:29:35.238 +07:00 [INF] Removing expired grants
2024-09-07 23:30:35.239 +07:00 [INF] Removing expired grants
2024-09-07 23:31:35.239 +07:00 [INF] Removing expired grants
2024-09-07 23:32:35.240 +07:00 [INF] Removing expired grants
2024-09-07 23:33:35.241 +07:00 [INF] Removing expired grants
2024-09-07 23:34:35.243 +07:00 [INF] Removing expired grants
2024-09-07 23:35:35.244 +07:00 [INF] Removing expired grants
2024-09-07 23:36:35.246 +07:00 [INF] Removing expired grants
2024-09-07 23:37:35.247 +07:00 [INF] Removing expired grants
2024-09-07 23:38:35.249 +07:00 [INF] Removing expired grants
2024-09-07 23:39:35.250 +07:00 [INF] Removing expired grants
2024-09-07 23:40:35.252 +07:00 [INF] Removing expired grants
2024-09-07 23:41:35.252 +07:00 [INF] Removing expired grants
2024-09-07 23:42:35.253 +07:00 [INF] Removing expired grants
2024-09-07 23:43:35.254 +07:00 [INF] Removing expired grants
2024-09-07 23:44:35.255 +07:00 [INF] Removing expired grants
2024-09-07 23:45:35.256 +07:00 [INF] Removing expired grants
2024-09-07 23:46:35.257 +07:00 [INF] Removing expired grants
2024-09-07 23:47:35.260 +07:00 [INF] Removing expired grants
2024-09-07 23:48:35.260 +07:00 [INF] Removing expired grants
2024-09-07 23:49:35.261 +07:00 [INF] Removing expired grants
2024-09-07 23:50:35.263 +07:00 [INF] Removing expired grants
2024-09-07 23:51:35.264 +07:00 [INF] Removing expired grants
2024-09-07 23:52:35.266 +07:00 [INF] Removing expired grants
2024-09-07 23:53:35.268 +07:00 [INF] Removing expired grants
2024-09-07 23:54:35.270 +07:00 [INF] Removing expired grants
2024-09-07 23:55:35.270 +07:00 [INF] Removing expired grants
2024-09-07 23:56:35.272 +07:00 [INF] Removing expired grants
2024-09-07 23:57:35.273 +07:00 [INF] Removing expired grants
2024-09-07 23:58:35.274 +07:00 [INF] Removing expired grants
2024-09-07 23:59:35.276 +07:00 [INF] Removing expired grants
